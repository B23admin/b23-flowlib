component_name: S3 Write With Retry

defaults:
  s3_prefix: ""

required_vars:
- s3_bucket
- s3_region
- s3_access_key
- s3_secret_key

process_group:
- name: input
  type: input_port
  connections:
  - name: put-s3

- name: put-s3
  type: processor
  config:
    package_id: org.apache.nifi.processors.aws.s3.PutS3Object
    auto_terminated_relationships: ['success']
    properties:
      Bucket: $(s3_bucket)
      Region: $(s3_region)
      Access Key: $(s3_access_key)
      Secret Key: $(s3_secret_key)
      Object Key: ${destination}
  connections:
  - name: put-s3
    relationships: ['failure']
